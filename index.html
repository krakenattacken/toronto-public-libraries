<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ten Years at the Toronto Public Library</title>

    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src='https://unpkg.com/simple-statistics@7.8.3/dist/simple-statistics.min.js'></script>
    <link href='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css' rel='stylesheet' />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet"/>
  </head>
  <body>
    <div id="map"></div>

    <main>
      <div class="container">
        <div class="sidebar-container header">
          <h1>ten years at the tpl<span>:</span></h1>
          <p class="info">
            The <a href="https://www.torontopubliclibrary.ca/" target="_blank" rel="noopener noreferrer">Toronto Public Library</a> is the largest public library system in North America. Explore some data from 2013-2023. Data from 
            <a href="https://open.toronto.ca/catalogue/?search=library&sort=score%20desc" target="_blank" rel="noopener noreferrer">Toronto Open Data.</a>
            See more on <a href="https://github.com/krakenattacken/toronto-public-libraries" target="_blank" rel="noopener noreferrer">GitHub</a>. Map by Laurence Jang.
          </p>
        </div>
        <div class="sidebar-container">
          <div>
            <select id="property-dropdown">
              <option value="visits">Visits</option>
              <option value="circulation">Circulated Materials</option>
              <option value="cards">Card Registrations</option>
            </select>
            <select id="year-dropdown"></select>
          </div>
          <label>
            <input type="checkbox" id="toggle-neighbourhoods"/>Neighbourhoods
          </label>
          <label>
            <input type="checkbox" id="toggle-closest"/>Closest Library
          </label>
        </div>
        <div id="popup" class="sidebar-container collapse">
          <div class="popup-title">
            <h2 id="branch-name"></h2>
            <button id="close-button" aria-label="close popup">&times;</button>
          </div>
          <p id="branch-address"></p>
          <p>
            <a id="branch-website" target="_blank" rel="noopener noreferrer">Branch Website</a> | <span id="branch-telephone"></span>
          </p>
          <img id="branch-photo"/>
          <p><b>Current address opening year: </b><span id="opening-year"></span></p>
          <p><b>Neighbourhood: </b><span id="branch-neighbourhood"></span></p>
          <p><b>Computer workstations: </b><span id="branch-workstations"></span></p>
          <p><b>Branch programs/features: </b><span id="branch-features"></span></p>
          <div class="chart-container">
            <canvas id="chart"></canvas>
          </div>
        </div>
      </div>  
    </main>
    <div id="legend" class="sidebar-container">
      <h3 id="legend-title">test</h3>
      <div class="legend-row">
        <svg height="30" width="64"><circle cx="31" cy="16" r="4" /></svg>
        <span class="legend-label"></span>
      </div>
      <div class="legend-row">
        <svg height="38" width="64"><circle cx="31" cy="20" r="8" /></svg>
        <span class="legend-label"></span>
      </div>
      <div class="legend-row">
        <svg height="44" width="64"><circle cx="31" cy="23" r="12" /></svg>
        <span class="legend-label"></span>
      </div>
      <div class="legend-row">
        <svg height="50" width="64"><circle cx="31" cy="25" r="16" /></svg>
        <span class="legend-label"></span>
      </div>
      <div class="legend-row">
        <svg height="54" width="64"><circle cx="31" cy="25" r="20" /></svg>
        <span class="legend-label"></span>
      </div>
      <div class="legend-row">
        <svg height="54" width="64"><circle cx="31" cy="27" r="26" /></svg>
        <span class="legend-label"></span>
      </div>      
    </div>
    <script src="map.js"></script>
  </body>
</html>